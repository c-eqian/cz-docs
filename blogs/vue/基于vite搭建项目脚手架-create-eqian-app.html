<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基于vite搭建项目脚手架-create-eqian-app | 秋谨~</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="https://s3.uuu.ovh/imgs/2022/11/23/f0fcebdd69e0360a.jpeg">
    <script language="javascript" type="text/javascript" src="https://cdn.staticfile.org/jquery/1.7.2/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/cz-docs/js/MouseClickEffect.js"></script>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/cz-docs/assets/css/0.styles.f183d118.css" as="style"><link rel="preload" href="/cz-docs/assets/js/app.e0426d90.js" as="script"><link rel="preload" href="/cz-docs/assets/js/4.f75cd3a5.js" as="script"><link rel="preload" href="/cz-docs/assets/js/1.0d7da4e9.js" as="script"><link rel="preload" href="/cz-docs/assets/js/34.d9c77f24.js" as="script"><link rel="preload" href="/cz-docs/assets/js/11.a973ada2.js" as="script"><link rel="prefetch" href="/cz-docs/assets/js/10.dfa5009c.js"><link rel="prefetch" href="/cz-docs/assets/js/12.17f2b6eb.js"><link rel="prefetch" href="/cz-docs/assets/js/13.446c18cf.js"><link rel="prefetch" href="/cz-docs/assets/js/14.319035df.js"><link rel="prefetch" href="/cz-docs/assets/js/15.e58df88e.js"><link rel="prefetch" href="/cz-docs/assets/js/16.bcd871df.js"><link rel="prefetch" href="/cz-docs/assets/js/17.6c17d3eb.js"><link rel="prefetch" href="/cz-docs/assets/js/18.3188b422.js"><link rel="prefetch" href="/cz-docs/assets/js/19.cf63a7dc.js"><link rel="prefetch" href="/cz-docs/assets/js/2.af67ce17.js"><link rel="prefetch" href="/cz-docs/assets/js/20.e96e1c8c.js"><link rel="prefetch" href="/cz-docs/assets/js/21.c3506834.js"><link rel="prefetch" href="/cz-docs/assets/js/22.8d57a774.js"><link rel="prefetch" href="/cz-docs/assets/js/23.e02511b2.js"><link rel="prefetch" href="/cz-docs/assets/js/24.95581d2b.js"><link rel="prefetch" href="/cz-docs/assets/js/25.bfa5c2a4.js"><link rel="prefetch" href="/cz-docs/assets/js/26.a81c727e.js"><link rel="prefetch" href="/cz-docs/assets/js/27.5e8493f4.js"><link rel="prefetch" href="/cz-docs/assets/js/28.bbb6a756.js"><link rel="prefetch" href="/cz-docs/assets/js/29.cbfad1cf.js"><link rel="prefetch" href="/cz-docs/assets/js/30.7e4a45f7.js"><link rel="prefetch" href="/cz-docs/assets/js/31.2fe318d6.js"><link rel="prefetch" href="/cz-docs/assets/js/32.bdfcc26f.js"><link rel="prefetch" href="/cz-docs/assets/js/33.521f162d.js"><link rel="prefetch" href="/cz-docs/assets/js/35.269212cc.js"><link rel="prefetch" href="/cz-docs/assets/js/36.e7a6ea87.js"><link rel="prefetch" href="/cz-docs/assets/js/37.1fca32fb.js"><link rel="prefetch" href="/cz-docs/assets/js/38.61314264.js"><link rel="prefetch" href="/cz-docs/assets/js/39.816c493d.js"><link rel="prefetch" href="/cz-docs/assets/js/5.36e7918c.js"><link rel="prefetch" href="/cz-docs/assets/js/6.e2e6a695.js"><link rel="prefetch" href="/cz-docs/assets/js/7.3816eded.js"><link rel="prefetch" href="/cz-docs/assets/js/8.b74c6eeb.js"><link rel="prefetch" href="/cz-docs/assets/js/9.2bd2cb8d.js">
    <link rel="stylesheet" href="/cz-docs/assets/css/0.styles.f183d118.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-58d791b2><div data-v-58d791b2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-08f61db9 data-v-58d791b2 data-v-58d791b2><h3 class="title" data-v-08f61db9>秋谨~</h3> <p class="description" data-v-08f61db9></p> <label id="box" class="inputBox" data-v-08f61db9><input type="password" value="" data-v-08f61db9> <span data-v-08f61db9>Konck! Knock!</span> <button data-v-08f61db9>OK</button></label> <div class="footer" data-v-08f61db9><span data-v-08f61db9><i class="iconfont reco-theme" data-v-08f61db9></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-08f61db9>vuePress-theme-reco</a></span> <span data-v-08f61db9><i class="iconfont reco-copyright" data-v-08f61db9></i> <a data-v-08f61db9><span data-v-08f61db9>秋谨</span>
          
        <span data-v-08f61db9>2022 - </span>
        2024
      </a></span></div></div> <div class="hide" data-v-58d791b2><header class="navbar" data-v-58d791b2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cz-docs/" class="home-link router-link-active"><img src="https://s3.bmp.ovh/imgs/2022/12/21/0aedf538ece60a2f.png" alt="秋谨~" class="logo"> <span class="site-name">秋谨~</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cz-docs/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://c-eqian.github.io/co-utils-vue/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  @eqian/utils-vue工具库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://c-eqian.github.io/e-plus-ui/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  e-plus-ui组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/cz-docs/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cz-docs/categories/vue/" class="nav-link"><i class="undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/cz-docs/categories/JavaScript/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/cz-docs/categories/python/" class="nav-link"><i class="undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/cz-docs/categories/其他/" class="nav-link"><i class="undefined"></i>
  其他
</a></li><li class="dropdown-item"><!----> <a href="/cz-docs/categories/SQL/" class="nav-link"><i class="undefined"></i>
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/cz-docs/categories/react/" class="nav-link"><i class="undefined"></i>
  react
</a></li></ul></div></div><div class="nav-item"><a href="/cz-docs/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><a href="https://www.eqian.site/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-date"></i>
  个人网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-58d791b2></div> <aside class="sidebar" data-v-58d791b2><div class="personal-info-wrapper" data-v-dd0a4f6c data-v-58d791b2><img src="https://s3.bmp.ovh/imgs/2022/11/23/f0fcebdd69e0360a.jpeg" alt="author-avatar" class="personal-img" data-v-dd0a4f6c> <h3 class="name" data-v-dd0a4f6c>
    秋谨
  </h3> <div class="num" data-v-dd0a4f6c><div data-v-dd0a4f6c><h3 data-v-dd0a4f6c>26</h3> <h6 data-v-dd0a4f6c>文章</h6></div> <div data-v-dd0a4f6c><h3 data-v-dd0a4f6c>25</h3> <h6 data-v-dd0a4f6c>标签</h6></div></div> <ul class="social-links" data-v-dd0a4f6c></ul> <hr data-v-dd0a4f6c></div> <nav class="nav-links"><div class="nav-item"><a href="/cz-docs/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://c-eqian.github.io/co-utils-vue/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  @eqian/utils-vue工具库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://c-eqian.github.io/e-plus-ui/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  e-plus-ui组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/cz-docs/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cz-docs/categories/vue/" class="nav-link"><i class="undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/cz-docs/categories/JavaScript/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/cz-docs/categories/python/" class="nav-link"><i class="undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/cz-docs/categories/其他/" class="nav-link"><i class="undefined"></i>
  其他
</a></li><li class="dropdown-item"><!----> <a href="/cz-docs/categories/SQL/" class="nav-link"><i class="undefined"></i>
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/cz-docs/categories/react/" class="nav-link"><i class="undefined"></i>
  react
</a></li></ul></div></div><div class="nav-item"><a href="/cz-docs/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><a href="https://www.eqian.site/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-date"></i>
  个人网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-08f61db9 data-v-58d791b2><h3 class="title" data-v-08f61db9>基于vite搭建项目脚手架-create-eqian-app</h3> <!----> <label id="box" class="inputBox" data-v-08f61db9><input type="password" value="" data-v-08f61db9> <span data-v-08f61db9>Konck! Knock!</span> <button data-v-08f61db9>OK</button></label> <div class="footer" data-v-08f61db9><span data-v-08f61db9><i class="iconfont reco-theme" data-v-08f61db9></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-08f61db9>vuePress-theme-reco</a></span> <span data-v-08f61db9><i class="iconfont reco-copyright" data-v-08f61db9></i> <a data-v-08f61db9><span data-v-08f61db9>秋谨</span>
          
        <span data-v-08f61db9>2022 - </span>
        2024
      </a></span></div></div> <div data-v-58d791b2><div data-v-58d791b2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">基于vite搭建项目脚手架-create-eqian-app</h1> <div data-v-ea9cd536><i class="iconfont reco-account" data-v-ea9cd536><span data-v-ea9cd536>秋谨</span></i> <i class="iconfont reco-date" data-v-ea9cd536><span data-v-ea9cd536>3个月前</span></i> <!----> <i class="tags iconfont reco-tag" data-v-ea9cd536><span class="tag-item" data-v-ea9cd536>vue</span><span class="tag-item" data-v-ea9cd536>vite</span></i></div></div> <div class="theme-reco-content content__default"><blockquote><p>生活之礁为强者所粉碎，生活之舟为勇士而扬帆。</p></blockquote> <h1 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h1> <p>为什么要做这个自己的项目脚手架呢？主要原因是因为在每次开发项目的时候，都要进重复性的项目搭建工作，比如使用<code>vite</code>、<code>vue3</code>作为项目开发框架，就会需要使用vite创建项目。同时，为了进行项目规范会还要配置<code>eslint</code>、<code>prettier</code>、<code>pinia</code>等常用插件。进而重复行的工作会导致时间上的浪费。或者可以将模板项目进行存放至仓库中，需要的时候进行克隆下来，但是这样始终不如使用脚手架来的方便点吧。</p> <p>所以去研究了一下<code>creat-vite</code>的源码，参考这个工作流程，搭建符合自己需求的项目脚手架。同时，搭建项目脚手架，有以下好处：</p> <p><strong>提高开发效率</strong></p> <ul><li><strong>标准化流程</strong>：通过项目脚手架，你可以定义一个标准的项目创建流程，包括项目初始化、文件生成、依赖安装等步骤。这样可以确保每次创建新项目时都能快速且准确地按照预定的步骤进行。</li> <li><strong>自动化配置</strong>：脚手架可以自动处理一些常见的配置任务，如设置构建工具、测试框架、代码风格检查等。这可以节省开发者手动配置的时间，让他们能够更快地投入到实际的开发工作中。</li></ul> <p><strong>定制项目结构</strong></p> <ul><li><strong>满足特定需求</strong>：不同的项目可能有不同的需求和结构要求。通过创建自己的项目脚手架，你可以根据项目需求定制项目结构，包括目录结构、文件模板、配置文件等。这样可以确保新项目从一开始就符合项目的需求。</li> <li><strong>保持一致性</strong>：在团队中，使用统一的项目脚手架可以确保团队成员在创建新项目时遵循相同的标准和规范，从而保持项目结构的一致性。</li></ul> <p><strong>简化项目初始化</strong></p> <ul><li><strong>减少手动操作</strong>：使用项目脚手架可以大大减少手动操作，如创建目录、编写配置文件等。开发者只需通过简单的命令行操作或交互式界面即可快速完成项目的初始化。</li> <li><strong>降低错误率</strong>：手动创建项目时容易出现错误，如配置错误、文件遗漏等。使用项目脚手架可以减少这些错误的发生，提高项目的质量。</li></ul> <p><strong>学习和探索新技术</strong></p> <ul><li><strong>技术实践</strong>：创建项目脚手架是一个很好的机会来学习和实践新技术和工具。你可以通过编写脚本来熟悉命令行接口、文件操作、模板引擎等技术，并将这些技术应用到实际的项目中。</li> <li><strong>技术探索</strong>：在创建脚手架的过程中，你可能会遇到一些新的挑战和问题。这将促使你去探索和学习更多的知识和解决方案，从而提高你的技术水平。</li></ul> <p><strong>便于项目管理和维护</strong></p> <ul><li><strong>统一管理</strong>：通过项目脚手架，你可以统一管理项目的创建和维护流程。无论是个人项目还是团队项目，都可以使用相同的脚手架来创建和维护项目，从而提高项目的可维护性和可管理性。</li> <li><strong>易于扩展</strong>：随着项目的发展和变化，你可能需要添加新的功能或修改现有的功能。使用项目脚手架可以方便地扩展和修改项目结构，以满足新的需求。</li></ul> <h1 id="必要的依赖"><a href="#必要的依赖" class="header-anchor">#</a> 必要的依赖</h1> <p>为了构建我们的脚手架工具，我们需要安装几个必要的Node.js模块。fs<code>（文件系统）、</code>path<code>（路径处理）、</code>url<code>（URL处理）、</code>minimist<code>（命令行参数处理）、prompts</code>（终端交互）和``kolorist`（颜色处理）等模块。</p> <h1 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h1> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> prompts minimist kolorist unbuild <span class="token parameter variable">--save</span> <span class="token parameter variable">-dev</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="minimist"><a href="#minimist" class="header-anchor">#</a> minimist</h1> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> argv <span class="token operator">=</span> <span class="token function">minimist</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">string</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'-'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>代码解释：</p> <ol><li>使用 slice(2) 方法从 <code>process.argv</code> 数组中取出从索引 2 开始的所有元素。这意味着它移除了 'node' 和 JavaScript 文件的路径，只保留了命令行参数。</li> <li>第二个参数目的是将 -（单独出现或作为其他参数值的一部分）当作字符串来处理</li></ol> <p>如运行命令 <code>xxxx my-vue-app --template vue</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span> <span class="token literal-property property">_</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'my-vue-app'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'vue'</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中_是一个数组，为用户输入的未带前缀属性的值 如my-vue-app</p> <h1 id="prompts"><a href="#prompts" class="header-anchor">#</a> prompts</h1> <ul><li><strong>很简单</strong>：提示<a href="http://npm.anvaka.com/#/view/2d/prompts" target="_blank" rel="noopener noreferrer">没有大的依赖关系<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，也没有分解成<a href="http://npm.anvaka.com/#/view/2d/inquirer" target="_blank" rel="noopener noreferrer">十几个<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>只能很好地协同工作的小模块。</li> <li><strong>用户友好</strong>：提示使用布局和颜色来创建漂亮的 cli 界面。</li> <li><strong>Promised</strong>：使用 promise 和 /。没有回调地狱。<code>async``await</code></li> <li><strong>灵活</strong>：所有提示都是独立的，可以单独使用。</li> <li><strong>可测试</strong>：提供一种以编程方式提交答案的方法。</li> <li><strong>统一</strong>：所有<a href="https://www.npmjs.com/package/prompts#-types" target="_blank" rel="noopener noreferrer">提示的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一致体验。</li></ul> <h2 id="安装-2"><a href="#安装-2" class="header-anchor">#</a> 安装</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> prompts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="主要参数说明"><a href="#主要参数说明" class="header-anchor">#</a> 主要参数说明</h2> <table><thead><tr><th>Param</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>type</td> <td>string | function</td> <td>交互类型</td></tr> <tr><td>name</td> <td><code>string</code></td> <td>显示名称</td></tr> <tr><td>message</td> <td><code>string</code></td> <td>提示显示消息</td></tr> <tr><td>initial</td> <td><code>string</code></td> <td><code>function</code></td></tr> <tr><td>style</td> <td><code>string</code></td> <td>渲染样式 （， ， ， ）。默认值为<code>default``password``invisible``emoji``default</code></td></tr> <tr><td>format</td> <td><code>function</code></td> <td>接收用户输入。返回的值将添加到响应对象中</td></tr> <tr><td>validate</td> <td><code>function</code></td> <td>接收用户输入。如果值有效，则应返回，否则应返回错误消息。如果返回，则显示默认错误消息<code>true``String``false</code></td></tr> <tr><td>onRender</td> <td><code>function</code></td> <td>在渲染回调时。关键字是指当前提示<code>this</code></td></tr> <tr><td>onState</td> <td><code>function</code></td> <td>在状态更改回调时。函数签名具有两个属性：和<code>object``value``aborted</code></td></tr></tbody></table> <h1 id="流程"><a href="#流程" class="header-anchor">#</a> 流程</h1> <p><img src="https://c-typora.oss-cn-guangzhou.aliyuncs.com/c-typora/image-20240507101958875.png" alt="image-20240507101958875"></p> <ol><li>获取终端命令行参数</li> <li>验证参数是否正确，项目名称是否合法、参数是否已经确定选择哪种框架</li> <li>终端相关交互</li> <li>确定模板项目、项目名称 复制文件到项目目录下</li></ol> <h2 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">|</span>-- build.config.js <span class="token comment"># unbuild打包配置文件</span>
<span class="token operator">|</span>-- dist
<span class="token operator">|</span>   <span class="token variable"><span class="token variable">`</span>-- index.mjs <span class="token comment"># 打包输出目录</span>
<span class="token operator">|</span>-- index.js <span class="token comment"># 入口文件</span>
<span class="token operator">|</span>-- package-lock.json
<span class="token operator">|</span>-- package.json
<span class="token operator">|</span>-- src
<span class="token operator">|</span>   <span class="token variable">`</span></span>-- index.js <span class="token comment"># 源代码</span>
<span class="token operator">|</span>-- template <span class="token comment"># 项目模板</span>
<span class="token operator">|</span>   <span class="token operator">|</span>-- template-react
<span class="token operator">|</span>   <span class="token operator">|</span>-- template-react-ts
<span class="token operator">|</span>   <span class="token operator">|</span>-- template-vue
<span class="token operator">|</span>   `-- template-vue-ts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="引入需要的库"><a href="#引入需要的库" class="header-anchor">#</a> 引入需要的库</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">'node:fs'</span> <span class="token comment">// 文件处理</span>
<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'node:path'</span> <span class="token comment">//路径处理</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fileURLToPath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'node:url'</span>
<span class="token keyword">import</span> minimist <span class="token keyword">from</span> <span class="token string">'minimist'</span><span class="token comment">// 处理命令行参数</span>
<span class="token keyword">import</span> prompts <span class="token keyword">from</span> <span class="token string">'prompts'</span> <span class="token comment">// 终端交互</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    blue<span class="token punctuation">,</span>
    cyan<span class="token punctuation">,</span>
    green<span class="token punctuation">,</span>
    lightBlue<span class="token punctuation">,</span>
    lightGreen<span class="token punctuation">,</span>
    lightRed<span class="token punctuation">,</span>
    magenta<span class="token punctuation">,</span>
    red<span class="token punctuation">,</span>
    reset<span class="token punctuation">,</span>
    yellow<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'kolorist'</span> <span class="token comment">// 用于着色stdin stdout的小实用程序,可以将颜色放入stdin和stdout中</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="定义框架类型"><a href="#定义框架类型" class="header-anchor">#</a> 定义框架类型</h2> <ul><li>variants是框架下的不同脚手架实现，如js,ts版本</li> <li>name：模板名，用于vite找到最终模板</li> <li>display：用于命令行展示的名称</li> <li>color：命令行展示时的文字颜色</li> <li>customCommand：需要执行的命令(这里没用到)</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * 定义框架
 */</span>
<span class="token keyword">const</span> <span class="token constant">FRAMEWORKS</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">'vue'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">'Vue'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> green<span class="token punctuation">,</span>
        <span class="token literal-property property">variants</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">'vue-ts'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">'TypeScript'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">color</span><span class="token operator">:</span> blue<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vue'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">'JavaScript'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">color</span><span class="token operator">:</span> yellow<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'react'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">'React'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> cyan<span class="token punctuation">,</span>
        <span class="token literal-property property">variants</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'react-ts'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">'TypeScript'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">color</span><span class="token operator">:</span> blue<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'react'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">'JavaScript'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">color</span><span class="token operator">:</span> yellow<span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="定义模板"><a href="#定义模板" class="header-anchor">#</a> 定义模板</h2> <ul><li>根据框架名称遍历模板项目名称和颜色 后面用到</li> <li>放到一个模板数组里面</li> <li>这里与<code>create-vite</code>源码中只有<code>['react-ts']</code>这样的框架类型，因为是个人的脚手架，因此无需跟<code>create-vite</code>一样，改成自己定义的就可以</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * 如：
 * [
 *    {
 *        name: 'react-ts',
 *        color: color
 *    }
 * ]
 */</span>
<span class="token keyword">const</span> <span class="token constant">TEMPLATES</span> <span class="token operator">=</span> <span class="token constant">FRAMEWORKS</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span>variants <span class="token operator">&amp;&amp;</span> f<span class="token punctuation">.</span>variants<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span>v<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
            <span class="token literal-property property">color</span><span class="token operator">:</span> v<span class="token punctuation">.</span>color
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span>f<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> f<span class="token punctuation">.</span>color
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="定义默认项目名称"><a href="#定义默认项目名称" class="header-anchor">#</a> 定义默认项目名称</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * 默认项目名称
 * 如果没有输入名称，使用默认的
 */</span>
<span class="token keyword">const</span> defaultTargetDir <span class="token operator">=</span> <span class="token string">'eqian-project'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="获取命令行参数"><a href="#获取命令行参数" class="header-anchor">#</a> 获取命令行参数</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * 解析命令行参数
 * 如 npm create eqian@latest my-vue-app --template vue
 * 得到
 * { _: [ 'my-vue-app' ], template: 'vue' }
 * 其中_是一个数组，为用户输入的未带前缀属性的值 如my-vue-app
 * 使用 slice(2) 方法从 process.argv 数组中取出从索引 2 开始的所有元素。
 * 这意味着它移除了 'node' 和 JavaScript 文件的路径，只保留了命令行参数。
 * 第二个参数目的是将 -（单独出现或作为其他参数值的一部分）当作字符串来处理
 */</span>
<span class="token keyword">const</span> argv <span class="token operator">=</span> <span class="token function">minimist</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">string</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'-'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="获取参数项目名称"><a href="#获取参数项目名称" class="header-anchor">#</a> 获取参数项目名称</h2> <p>获取不带前缀的参数，如一般是项目名称,<code>formatTargetDir</code>格式化输入的项目名称，避免不必要的多余字符</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// 获取不带前缀的参数，如一般是项目名称</span>
    <span class="token keyword">const</span> argTargetDir <span class="token operator">=</span> <span class="token function">formatTargetDir</span><span class="token punctuation">(</span>argv<span class="token punctuation">.</span>_<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
     <span class="token comment">// 如果没有输入项目名称，使用默认的</span>
    <span class="token keyword">let</span> targetDir <span class="token operator">=</span> argTargetDir <span class="token operator">||</span> defaultTargetDir
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="获取参数模板"><a href="#获取参数模板" class="header-anchor">#</a> 获取参数模板</h2> <ol><li>argv.template表示输入参数为 --template</li> <li>argv.t表示输入参数-t</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">const</span> argTemplate <span class="token operator">=</span> argv<span class="token punctuation">.</span>template <span class="token operator">||</span> argv<span class="token punctuation">.</span>t
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="终端交互"><a href="#终端交互" class="header-anchor">#</a> 终端交互</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// 默认配置覆盖。如果用户输入覆盖参数，则不会出现提示覆盖的选择</span>
    prompts<span class="token punctuation">.</span><span class="token function">override</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">overwrite</span><span class="token operator">:</span> argv<span class="token punctuation">.</span>overwrite<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">prompts</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token comment">// 项目名称</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> argTargetDir <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token comment">// 交互类型</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'projectName'</span><span class="token punctuation">,</span><span class="token comment">// 显示名称</span>
                <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token string">'Project name'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//提示显示消息</span>
                <span class="token literal-property property">initial</span><span class="token operator">:</span> defaultTargetDir<span class="token punctuation">,</span><span class="token comment">// 默认字符串值</span>
                <span class="token function-variable function">onState</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 在状态更改回调时。函数签名具有两个属性：和object value aborted</span>
                    targetDir <span class="token operator">=</span> <span class="token function">formatTargetDir</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">||</span> defaultTargetDir
            <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 校验项目目录是否为空，不为空用户确认</span>
            <span class="token punctuation">{</span>
                <span class="token function-variable function">type</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
                    <span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>targetDir<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span>targetDir<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token string">'select'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'overwrite'</span><span class="token punctuation">,</span><span class="token comment">// 如果模板路径不为空，是否覆盖</span>
                <span class="token function-variable function">message</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
                    <span class="token punctuation">(</span>targetDir <span class="token operator">===</span> <span class="token string">'.'</span>
                        <span class="token operator">?</span> <span class="token string">'Current directory'</span>
                        <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Target directory &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>targetDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token operator">+</span>
                    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> is not empty. Please choose how to proceed:</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token literal-property property">initial</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">// 默认选择第一项</span>
                <span class="token literal-property property">choices</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Remove existing files and continue'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'yes'</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Cancel operation'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'no'</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Ignore files and continue'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'ignore'</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 确认是否覆盖</span>
            <span class="token punctuation">{</span>
                <span class="token function-variable function">type</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> overwrite <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">/**
                     * 基于上一个提示 (overwrite) 的响应来动态确定的提示类型。如果 overwrite 的值为 'no'，
                     * 则抛出一个错误并取消操作。否则，类型为 null，表示不显示此提示。
                     */</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>overwrite <span class="token operator">===</span> <span class="token string">'no'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token string">'✖'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' Operation cancelled'</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">return</span> <span class="token keyword">null</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'overwriteChecker'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 包名称是否合法</span>
            <span class="token punctuation">{</span>
                <span class="token comment">/**
                 * 如果项目名称符合包名称的语法，则会默认使用项目名称作为包名称
                 * 否则，需要用户进行命名包名称
                 * @returns {null|string}
                 */</span>
                <span class="token function-variable function">type</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token function">isValidPackageName</span><span class="token punctuation">(</span><span class="token function">getProjectName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'packageName'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token string">'Package name:'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function-variable function">initial</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">toValidPackageName</span><span class="token punctuation">(</span><span class="token function">getProjectName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function-variable function">validate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
                    <span class="token comment">/**
                     * 接收用户输入。如果值有效，则应返回，否则应返回错误消息。如果返回，则显示默认错误消息true String false
                     * @param dir
                     * @returns {boolean|string}
                     */</span>
                    <span class="token function">isValidPackageName</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'Invalid package.json name'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//   是否已经有选择模板参数 没有提示选择</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span>
                    argTemplate <span class="token operator">&amp;&amp;</span> <span class="token constant">TEMPLATES</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token operator">=&gt;</span> v<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>argTemplate<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token string">'select'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'framework'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">message</span><span class="token operator">:</span>
                    <span class="token comment">// 如果输入模板框架不在默认框架里，提示重新选择</span>
                    <span class="token keyword">typeof</span> argTemplate <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token constant">TEMPLATES</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token operator">=&gt;</span> v<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>argTemplate<span class="token punctuation">)</span>
                        <span class="token operator">?</span> <span class="token function">reset</span><span class="token punctuation">(</span>
                            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>argTemplate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; isn't a valid template. Please choose from below: </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                        <span class="token punctuation">)</span>
                        <span class="token operator">:</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token string">'Select a framework:'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">initial</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token literal-property property">choices</span><span class="token operator">:</span> <span class="token constant">TEMPLATES</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">framework</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> frameworkColor <span class="token operator">=</span> framework<span class="token punctuation">.</span>color
                    <span class="token keyword">return</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token function">frameworkColor</span><span class="token punctuation">(</span>framework<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">value</span><span class="token operator">:</span> framework<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token function-variable function">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token string">'✖'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' Operation cancelled'</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br></div></div><h2 id="获取交互结果"><a href="#获取交互结果" class="header-anchor">#</a> 获取交互结果</h2> <ol><li>framework：获取框架名称</li> <li>overwrite：是否覆盖</li> <li>packageName： 包名称</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">const</span> <span class="token punctuation">{</span> framework<span class="token punctuation">,</span> overwrite<span class="token punctuation">,</span> packageName <span class="token punctuation">}</span> <span class="token operator">=</span> result
    <span class="token comment">// console.log(framework, overwrite, packageName)</span>
    <span class="token keyword">const</span> root <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> targetDir<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>overwrite <span class="token operator">===</span> <span class="token string">'yes'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setEmptyDir</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="确定最终的框架"><a href="#确定最终的框架" class="header-anchor">#</a> 确定最终的框架</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// 确定模板</span>
    <span class="token keyword">let</span> template <span class="token operator">=</span> framework <span class="token operator">||</span> argTemplate
    <span class="token keyword">const</span> pkgInfo <span class="token operator">=</span> <span class="token function">pkgFromUserAgent</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>npm_config_user_agent<span class="token punctuation">)</span>
    <span class="token comment">// 包管理器</span>
    <span class="token keyword">const</span> pkgManager <span class="token operator">=</span> pkgInfo <span class="token operator">?</span> pkgInfo<span class="token punctuation">.</span>name <span class="token operator">:</span> <span class="token string">'npm'</span>
    <span class="token comment">// console.log(pkgManager)</span>
    <span class="token comment">// const isYarn1 = pkgManager === 'yarn' &amp;&amp; pkgInfo?.version.startsWith('1.')</span>
    <span class="token comment">// 模板目录</span>
    <span class="token keyword">const</span> templateDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
        <span class="token function">fileURLToPath</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'../..'</span><span class="token punctuation">,</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">template/template-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>template<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="复制模板文件"><a href="#复制模板文件" class="header-anchor">#</a> 复制模板文件</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">/**
     * 文件写入
     * @param file 需要写入的路径文件
     * @param content 是否使用content作为写入内容
     */</span>
    <span class="token keyword">const</span> <span class="token function-variable function">fileWrite</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">// 获取目标文件路径 xxx/targetDir/xxx</span>
        <span class="token keyword">const</span> targetPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> renameGitignoreFiles<span class="token punctuation">[</span>file<span class="token punctuation">]</span> <span class="token operator">??</span> file<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">{</span>
            fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>targetPath<span class="token punctuation">,</span> content<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">copyFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>templateDir<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">,</span> targetPath<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 新增判断模板项目是否存在</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>templateDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>template<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> not exist</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 读取模板目录下的所有文件</span>
    <span class="token keyword">const</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>templateDir<span class="token punctuation">)</span>
    <span class="token comment">// 先排除复制模板项目的package.json，待将包名称修改完成后再复制过来</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> file <span class="token keyword">of</span> files<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> f <span class="token operator">!==</span> <span class="token string">'package.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fileWrite</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 读取模板项目下的package.json内容</span>
    <span class="token keyword">const</span> pkg <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>
        fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>templateDir<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">package.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    pkg<span class="token punctuation">.</span>name <span class="token operator">=</span> packageName <span class="token operator">||</span> <span class="token function">getProjectName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 将修改后的package.json复制到指定目标目录</span>
    <span class="token function">fileWrite</span><span class="token punctuation">(</span><span class="token string">'package.json'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>pkg<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="完成后的操作"><a href="#完成后的操作" class="header-anchor">#</a> 完成后的操作</h2> <p>主要提示如何运行项目，如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>  <span class="token builtin class-name">cd</span> <span class="token builtin class-name">test</span>
  <span class="token function">npm</span> <span class="token function">install</span>
  <span class="token function">npm</span> run dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// 返回相对于第一条路径的第二个路径的路径 如 /app/a, /app/b ==&gt;  ../b</span>
    <span class="token keyword">const</span> cdProjectName <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> root<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\nDone. Now run:\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token comment">// 如果目标路径不是当前路径下，需要提示cd命令切换到目标路径</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">!==</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">  cd </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
                cdProjectName<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cdProjectName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> cdProjectName
            <span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 处理当前用户使用的包管理器</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>pkgManager<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'yarn'</span><span class="token operator">:</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'  yarn'</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'  yarn dev'</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pkgManager<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> install</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pkgManager<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> run dev</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="工具函数"><a href="#工具函数" class="header-anchor">#</a> 工具函数</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * 复制文件到指定目录下
 * @param src
 * @param dest
 */</span>
<span class="token keyword">function</span> <span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> dest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 文件信息状态</span>
    <span class="token keyword">const</span> stat  <span class="token operator">=</span>fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span>
    <span class="token comment">// 如果是目录</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stat<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//     继续获取该目录下的文件，并递归创建目标目录</span>
    fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> file <span class="token keyword">of</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> srcFile <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> file<span class="token punctuation">)</span>
        <span class="token keyword">const</span> destFile <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span> file<span class="token punctuation">)</span>
        <span class="token function">copyFile</span><span class="token punctuation">(</span>srcFile<span class="token punctuation">,</span> destFile<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">copyFileSync</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dest<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 格式化项目名称
 * 将最后的/替换为空
 * @param targetDir
 * @returns {string | undefined}
 */</span>
<span class="token keyword">function</span> <span class="token function">formatTargetDir</span><span class="token punctuation">(</span><span class="token parameter">targetDir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> targetDir<span class="token operator">?.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 校验有效项目名称 因为包名称默认是基于项目名称
 * @param projectName
 * @returns {boolean}
 */</span>
<span class="token keyword">function</span> <span class="token function">isValidPackageName</span><span class="token punctuation">(</span><span class="token parameter">projectName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:@[a-z\d\-*~][a-z\d\-*._~]*\/)?[a-z\d\-~][a-z\d\-._~]*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>
        projectName<span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 转换有效包名称
 * @param projectName
 * @returns {string}
 */</span>
<span class="token keyword">function</span> <span class="token function">toValidPackageName</span><span class="token punctuation">(</span><span class="token parameter">projectName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> projectName
        <span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[._]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^a-z\d\-~]+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 预处理_gitignore文件，转为正确的gitignore
 * @type {{_gitignore: string}}
 */</span>
<span class="token keyword">const</span> renameGitignoreFiles<span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">_gitignore</span><span class="token operator">:</span> <span class="token string">'.gitignore'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 清空目录列表
 * @param dir
 */</span>
<span class="token keyword">function</span> <span class="token function">setEmptyDir</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> file <span class="token keyword">of</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>file <span class="token operator">===</span> <span class="token string">'.git'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">continue</span>
        <span class="token punctuation">}</span>
        fs<span class="token punctuation">.</span><span class="token function">rmSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">force</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 获取用户当前环境的node包管理器
 * @param userAgent
 * @returns {undefined|{name: *, version: *}}
 */</span>
<span class="token keyword">function</span> <span class="token function">pkgFromUserAgent</span><span class="token punctuation">(</span><span class="token parameter">userAgent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>userAgent<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">undefined</span>
    <span class="token keyword">const</span> pkgSpec <span class="token operator">=</span> userAgent<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> pkgSpecArr <span class="token operator">=</span> pkgSpec<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> pkgSpecArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">version</span><span class="token operator">:</span> pkgSpecArr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 判断当前路径是否为空
 * @param path
 * @returns {boolean}
 */</span>
<span class="token keyword">function</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
    <span class="token keyword">return</span> files<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token punctuation">(</span>files<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'.git'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br></div></div><h1 id="打包"><a href="#打包" class="header-anchor">#</a> 打包</h1> <p>这里打包工具使用的是<code>unbuild</code>,<code>unbuild</code> 是一个基于 <code>rollup</code> 的打包工具。官方README中描述它有以下这些优势。</p> <ul><li>强大的构建功能 - unbuild 集成了 Rollup 构建工具，支持 TypeScript，并能生成 CommonJS 和模块格式以及类型声明，提供了丰富的构建功能。</li> <li>自动化配置 - unbuild 可以从 package.json 文件中自动推断构建配置和入口点，减少了手动配置的工作量。</li> <li>与 <code>mkdist</code> 集成，通过文件到文件的转译生成无捆绑的 dist</li> <li>使用 <code>jiti</code> 开发过程中只需要一次编译之后的改动都可以实时同步调试。而无需在开发过程中监视和重建</li></ul> <p>此外可以将打包后的文件发布到npm，发布过程时间原因，这里就不一一讲述了。</p> <h1 id="自定义和扩展"><a href="#自定义和扩展" class="header-anchor">#</a> 自定义和扩展</h1> <p>我们的脚手架工具只是一个基础框架，你可以根据需要进行自定义和扩展。例如，你可以添加更多的框架模板、支持更多的初始化选项、集成代码格式化工具等。</p> <h1 id="验证使用"><a href="#验证使用" class="header-anchor">#</a> 验证使用</h1> <p>完成开发后，你可以将你的脚手架工具发布到npm上，供其他开发者使用。其他开发者只需通过npm安装你的工具，并在命令行中运行相应的命令即可快速搭建他们的项目。</p> <p><img src="https://c-typora.oss-cn-guangzhou.aliyuncs.com/c-typora/image-20240507113910823.png" alt="image-20240507113910823"></p> <p><strong>注意： 在文档中使用命令应该是npx，同时，在v1.0.0版本中基于测试功能，现在的模板只是简单的模板，后期会抽出时间补上这一块</strong></p> <h1 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h1> <p>通过Node.js和几个关键的npm模块，我们可以轻松地构建一个交互式的脚手架工具。这个工具不仅可以帮助开发者快速选择并初始化他们的项目，还可以根据需要进行自定义和扩展。如果你是一个经常需要搭建新项目的开发者，那么一个高效的脚手架工具无疑会大大提高你的工作效率。</p> <h1 id="相关链接"><a href="#相关链接" class="header-anchor">#</a> 相关链接</h1> <p>[项目地址](<a href="https://github.com/C1320/create-eqian-app" target="_blank" rel="noopener noreferrer">C1320/create-eqian-app: 使用Node.js构建一个交互式的脚手架工具 (github.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p> <p><a href="https://github.com/vitejs/vite/tree/main/packages/create-vite" target="_blank" rel="noopener noreferrer">create-vite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间: </span> <span class="time">2024-08-28, 15:40:20</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-6ea58682 data-v-58d791b2><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#安装-2" class="sidebar-link reco-side-安装-2" data-v-6ea58682>安装</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#主要参数说明" class="sidebar-link reco-side-主要参数说明" data-v-6ea58682>主要参数说明</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#目录结构" class="sidebar-link reco-side-目录结构" data-v-6ea58682>目录结构</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#引入需要的库" class="sidebar-link reco-side-引入需要的库" data-v-6ea58682>引入需要的库</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#定义框架类型" class="sidebar-link reco-side-定义框架类型" data-v-6ea58682>定义框架类型</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#定义模板" class="sidebar-link reco-side-定义模板" data-v-6ea58682>定义模板</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#定义默认项目名称" class="sidebar-link reco-side-定义默认项目名称" data-v-6ea58682>定义默认项目名称</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#获取命令行参数" class="sidebar-link reco-side-获取命令行参数" data-v-6ea58682>获取命令行参数</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#获取参数项目名称" class="sidebar-link reco-side-获取参数项目名称" data-v-6ea58682>获取参数项目名称</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#获取参数模板" class="sidebar-link reco-side-获取参数模板" data-v-6ea58682>获取参数模板</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#终端交互" class="sidebar-link reco-side-终端交互" data-v-6ea58682>终端交互</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#获取交互结果" class="sidebar-link reco-side-获取交互结果" data-v-6ea58682>获取交互结果</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#确定最终的框架" class="sidebar-link reco-side-确定最终的框架" data-v-6ea58682>确定最终的框架</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#复制模板文件" class="sidebar-link reco-side-复制模板文件" data-v-6ea58682>复制模板文件</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#完成后的操作" class="sidebar-link reco-side-完成后的操作" data-v-6ea58682>完成后的操作</a></li><li class="level-2" data-v-6ea58682><a href="/cz-docs/blogs/vue/%E5%9F%BA%E4%BA%8Evite%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6-create-eqian-app.html#工具函数" class="sidebar-link reco-side-工具函数" data-v-6ea58682>工具函数</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      我是lookroot欢迎你的关注 
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="300px" height="352" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><!----><div></div><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="http://music.163.com/song/media/outer/url?id=518291899.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="https://p1.music.126.net/AKhQSRL6HyZu4YwWg4Wi6A==/109951163060585255.jpg?param=130y130" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(https://p1.music.126.net/AKhQSRL6HyZu4YwWg4Wi6A==/109951163060585255.jpg?param=130y130);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>飞舞吧，樱花！</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>余日秋山</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div><!----></div></div>
    <script src="/cz-docs/assets/js/app.e0426d90.js" defer></script><script src="/cz-docs/assets/js/4.f75cd3a5.js" defer></script><script src="/cz-docs/assets/js/1.0d7da4e9.js" defer></script><script src="/cz-docs/assets/js/34.d9c77f24.js" defer></script><script src="/cz-docs/assets/js/11.a973ada2.js" defer></script>
  </body>
</html>
